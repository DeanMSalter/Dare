<script>
  const introText = `Answer the questions using the dedicated numbers. Good Luck.`
  const notAnOption = `Not an option.`


  //Main Menu
  const mainMenuText = `You are stuck in a room full of many different obects. door to the room is currently locked. The metal door handle you notice a lock needing a four digit code.`
  const mainMenuOptions = `In the room you notice:\n1. Calender,\n2. Bookcase,\n3. Table and Lamp\n4. Chest of Drawers\n5. Rug\n6. Desk\n7. Bed\n8. Window\n9. Door\n0. Quit`
  const mainMenuResponses = [1,2,3,4,5,6,7,8,9,0]

  //Calender
  const calenderText = `You notice a calender hanging by a small nail on the wall. The month reads November and the year reads 2017.`
  const calenderMenuOptions =`\n1. Inspect\n2. Pick Up`
  const calenderMenuResponses = [1,2]

//Bookcase
  const bookcaseText = `You walk over to the bookcase. It is full of all kinds of different books. At the botttom is a small draw`
  const bookcaseMenuOptions = `\n1. Inspect\n2. Open Drawer`
  const bookcaseMenuResponses = [1,2]

  //window
  const windowText = `Out the window all you can see is the brick wall before you.`

  //Rug
  const rugText = `Something`
  const rugMenuOptions = `\n1. Inspect\n2. Look Underneath`
  const rugMenuResponses = [1,2]

  //Door
  const doorText = `You approach the door. The metal frame is consistent with the metal door handle. You notice there are no marks or scratches. What would you like to do?`
  const doorMenuOptions =`\n1. Open Door\n2. Attempt Code\n3. Knock\n4. Attmpt Opening by Force`
  const doorMenuResponses = [1,2,3,4]
  const doorCodeAnswer = '4321'

  function startGame() {
    alert(introText);
    goToMainMenu();
  }

  function goToMainMenu() {
    let mainMenuResponse =  getAnswer(mainMenuText + mainMenuOptions, mainMenuResponses);
    //Calender
    if(mainMenuResponse === 1){
      calender()
    }

    //Bookcase
    if(mainMenuResponse === 2){
      bookcase()
    }

    //Rug
    if(mainMenuResponse === 5){
      rug();
    }

    //Window
    if(mainMenuResponse === 8){
      alert(windowText);
      goToMainMenu();
    }

    //Door
    if(mainMenuResponse === 9){
      door();
    }

    //Quit
    if(mainMenuResponse === 0){
      location.reload();
    }
  }

  //1
  function calender(){
    let calenderMenuResponse = getAnswer(calenderText + calenderMenuOptions, calenderMenuResponses)

    if(calenderMenuResponse === 1){
      alert(`You notice a picture of a fireworks display at the top. On the calender, some of the dates contain text:\n1st - Daylight Savings\n5th - Guy Fawks\n8th - Rememberance Sunday\n11th - Rememberance Day\n26th - Thanksgiving Day`);
      calender();
    }
    if (calenderMenuResponse === 2){
      pickUpCalender()
    }

    function pickUpCalender(){
      let pickUpText = `You move the calender off the wall to look at it in more detail. Behind the calender is only a blank wall with the one nail sticking out.`
      let pickUpMenuOptions = `\n1. Put Back\n2. Flick Through`
      let pickUpMenuResponses=[1,2]
      let pickUpMenuResponse = getAnswer(pickUpText + pickUpMenuOptions, pickUpMenuResponses)

      if(pickUpMenuResponse === 1) {
        alert(`You hang the calender back on the wall using the nail. Dispite trying to straighten it, the calender remains crooked.`)
        calender()
      }
      if(pickUpMenuResponse == 2) {
        alert(`Flicking through you the calender there is no extra writing. It appears as though the other months are untouched.`)
        pickUpCalender()
      }
    }
  }

function bookcase() {
  let bookcaseMenuResponse = getAnswer(bookcaseText + bookcaseMenuOptions, bookcaseMenuResponses)

  if(bookcaseMenuResponse === 1){
    alert(`Each book has words missing form the spines due to being damaged. None of them are readable.`);
    bookcase();
  }
  if (bookcaseMenuResponse === 2){
    bookcaseDraw();
  }

  function bookcaseDraw(){
    let bookcaseDrawText = `The draw is locked with a combnation lock that uses X's and O's.`
    let bookcaseDrawResponses = 'XoXXoX'
    let bookcaseDrawResponse = codeEntry(bookcaseDrawText, bookcaseDrawResponses)

    if(bookcaseDrawResponse) {
      alert(`The draw opens to reveal two books.`)
    }
    else {
      alert(`The combination doesn't work.`)
    }
  }
}

  //5
  function rug(){
    let rugMenuResponse = getAnswer(rugText + rugMenuOptions, rugMenuResponses)

    if(rugMenuResponse === 1){
      alert(`You see the large rug covering most of the floor at the bottom of the bed. The top right corner seems to curl up slightly.`);
      rug();
    }
    if (rugMenuResponse === 2){
      alert(`You notice ettchings on the bottom of the rug. These resemble B, C, L, D.`);
      rug();
    }
  }

  //9
  function door(){
    let doorMenuResponse = getAnswer(doorText + doorMenuOptions, doorMenuResponses);

    if(doorMenuResponse === 1){
      alert('You are unable to open the door.')
      door();
    }

    if(doorMenuResponse === 2) {
      let doorCodeAttempt = codeEntry("What is the code?", doorCodeAnswer);
      if(doorCodeAttempt){
        alert("You Win!");
      } else {
        alert("Incorrect code.");
        door();
      }
    }

    if(doorMenuResponse === 3){
      alert('There is no response.');
      door();
    }

    if(doorMenuResponse === 4){
      alert('The door does not move. You hurt your shoulder')
      door();
    }
  }


  //Utility
  function getAnswer(question, validAnswers){
    let answer = "";
    while(answer.toString().trim() === ""){
      answer = prompt(question);
      if(answer === null || answer === false) {
        return  goToMainMenu();
      }
      answer = parseInt(answer);
      if(!validAnswers.includes(answer)) {
        alert(notAnOption)
        answer = "";
      }
    }
    return answer;
  }

  function codeEntry(question, correctAnswer){
    let answer = "";
    while(answer.toString().trim() === ""){
      answer = prompt(question);
      if(answer === null || answer === false){
        return goToMainMenu();
      }
    }
    if(answer === correctAnswer) {
      return true;
    }else {
      return false;
    }
  }
</script>
<html>
  <head>
    <link rel="stylesheet" href="index.css">
  </head>
  <p id="explainationText">
    Interactive text game developed by Clare Mansfield and Dean Salter to help Clare imporove her skills with Javascript.
    The name of the game is a combination of both of our names.
  </p>
  <input type="button" id="startGameBtn" value="Dare" onclick="javascript:startGame()"/>
</html>
