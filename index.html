<script>
const introText = `Answer the questions using the dedicated numbers. Good Luck.`
const notAnOption = `Not an option.`


//Main Menu
const mainMenuText = `You are stuck in a room full of many different obects. door to the room is currently locked. The metal door handle you notice a lock needing a four digit code.`
const mainMenuOptions = `In the room you notice:\n1. Calender,\n2. Bookcase,\n3. Table and Lamp\n4. Chest of Drawers\n5. Rug\n6. Desk\n7. Bed\n8. Window\n9. Door\n0. Quit`
const mainMenuResponses = [1,2,3,4,5,6,7,8,9,0]

//window
const windowText = `Out the window all you can see is the brick wall before you.`

//Rug
const rugText = `Something`

//Door
const doorText = `You approach the door. The metal frame is consistent with the metal door handle. You notice there are no marks or scratches. What would you like to do?`
const doorMenuOptions =`\n1. Open Door\n2. Attempt Code\n3. Knock\n4. Attmpt Opening by Force`
const doorMenuResponses = [1,2,3,4]
const doorCodeAnswer = '4321'

function startGame() {
  alert(introText);
  goToMainMenu();
}

function goToMainMenu() {
  let mainMenuResponse =  getAnswer(mainMenuText + mainMenuOptions, mainMenuResponses);

  if(mainMenuResponse === 8){
    alert(windowText);
    goToMainMenu();
  }
  if(mainMenuResponse === 5){
    alert(rugText);
    goToMainMenu();
  }

  if(mainMenuResponse === 9){
    door();
  }

  if(mainMenuResponse === 0){
    location.reload();
  }
}

function door(){
  let doorMenuResponse = getAnswer(doorText + doorMenuOptions, doorMenuResponses);

  if(doorMenuResponse === 1){
    alert('You are unable to open the door.')
    door();
  }

  if(doorMenuResponse === 2) {
    let doorCodeAttempt = codeEntry("What is the code?", doorCodeAnswer);
    if(doorCodeAttempt){
      alert("You Win!");
    } else {
      alert("Incorrect code.");
      door();
    }
  }

  if(doorMenuResponse === 3){
    alert('There is no reponse.');
    door();
  }

  if(doorMenuResponse === 4){
    alert('The door does not move. You hurt your shoulder')
    door();
  }
}

function getAnswer(question, validAnswers){
  let answer = "";
  while(answer.toString().trim() === ""){
    answer = prompt(question);
    if(answer === null || answer === false) {
      return  goToMainMenu();
    }
    answer = parseInt(answer);
    if(!validAnswers.includes(answer)) {
      alert(notAnOption)
      answer = "";
    }
  }
  return answer;
}

function codeEntry(question, correctAnswer){
  let answer = "";
  while(answer.toString().trim() === ""){
    answer = prompt(question);
    if(answer === null || answer === false){
      return goToMainMenu();
    }
  }
  if(answer === correctAnswer) {
    return true;
  }else {
    return false;
  }
}




</script>
<html>
  <input type="button" value="launch game" onclick="javascript:startGame()"/>
</html>
